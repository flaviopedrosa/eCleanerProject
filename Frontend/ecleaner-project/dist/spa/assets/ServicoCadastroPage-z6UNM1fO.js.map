{"version":3,"file":"ServicoCadastroPage-z6UNM1fO.js","sources":["../../../src/pages/ServicoCadastroPage.vue"],"sourcesContent":["<template>\n  <q-page class=\"q-pa-lg\">\n    <!-- Cabeçalho da Página -->\n    <div class=\"row items-center q-mb-xl\">\n      <div class=\"col\">\n        <div class=\"row items-center q-mb-sm\">\n          <q-btn flat round icon=\"arrow_back\" @click=\"$router.go(-1)\" class=\"q-mr-md\" />\n          <q-icon :name=\"isEditMode ? 'edit' : 'build'\" size=\"2rem\" class=\"text-secondary q-mr-md\" />\n          <h4 class=\"text-h5 q-ma-none text-secondary\">\n            {{ isEditMode ? $t('pages.servico.editTitle') : $t('pages.servico.cadastroTitle') }}\n          </h4>\n        </div>\n        <div class=\"accent-divider q-mb-md\"></div>\n        <div class=\"row justify-end\">\n          <p class=\"text-subtitle1 text-grey-7 q-ma-none\">\n            {{ $t('pages.servico.cadastroSubtitle') }}\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Formulário de cadastro/edição -->\n    <q-form @submit.prevent=\"salvarServico\" class=\"q-gutter-md\">\n      <!-- Dados do Serviço -->\n      <q-card flat bordered>\n        <q-card-section>\n          <div class=\"text-h6 text-primary q-mb-md\">\n            <q-icon name=\"build\" class=\"q-mr-sm\" />\n            {{ $t('forms.servico.sections.serviceData') }}\n          </div>\n\n          <div class=\"row q-col-gutter-md\">\n            <div class=\"col-12 col-md-6\">\n              <q-input v-model=\"servico.Nome\" :label=\"$t('pages.servico.fields.nome') + ' *'\" filled lazy-rules\n                :rules=\"[rules.required]\" />\n            </div>\n\n            <div class=\"col-12 col-md-6\">\n              <q-input v-model=\"valorFormatado\" :label=\"$t('pages.servico.fields.valor') + ' *'\" filled lazy-rules\n                :rules=\"[rules.required]\" @input=\"onValorInput\" :placeholder=\"currencyConfig.placeholder\">\n                <template v-slot:prepend>\n                  <q-icon name=\"attach_money\" />\n                </template>\n              </q-input>\n            </div>\n\n            <div class=\"col-12 col-md-6\">\n              <q-select v-model=\"servico.Unidade\" :options=\"unidadeOptions\"\n                :label=\"$t('pages.servico.fields.unidade') + ' *'\" filled lazy-rules :rules=\"[rules.required]\"\n                emit-value map-options>\n                <template v-slot:prepend>\n                  <q-icon name=\"straighten\" />\n                </template>\n              </q-select>\n            </div>\n\n            <div class=\"col-12 col-md-6 flex items-center\">\n              <q-toggle v-model=\"servico.Ativo\" :label=\"$t('pages.servico.fields.ativo')\" color=\"primary\"\n                class=\"q-mt-md\" />\n            </div>\n\n            <div class=\"col-12\">\n              <q-input v-model=\"servico.Descricao\" type=\"textarea\" :label=\"$t('pages.servico.fields.descricao') + ' *'\"\n                filled lazy-rules :rules=\"[rules.required]\" rows=\"3\" />\n            </div>\n\n            <div class=\"col-12\">\n              <q-input v-model=\"servico.Observacao\" type=\"textarea\" :label=\"$t('pages.servico.fields.observacao')\"\n                filled rows=\"2\" />\n            </div>\n          </div>\n        </q-card-section>\n      </q-card>\n\n      <!-- Botões de Ação -->\n      <div class=\"row q-gutter-md justify-end\">\n        <q-btn flat :label=\"$t('forms.buttons.cancel')\" @click=\"cancelar\" />\n        <q-btn color=\"primary\" :label=\"isEditMode ? $t('buttons.update') : $t('forms.buttons.save')\" type=\"submit\"\n          :loading=\"store.loading\" />\n      </div>\n    </q-form>\n  </q-page>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted, computed } from 'vue'\nimport { useServicoStore } from 'stores/servico-store'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useI18n } from 'vue-i18n'\nimport { currencyMask, parseCurrency, getCurrencyConfig, formatCurrency } from 'src/core/domain/utils/currencyUtils'\n\nexport default defineComponent({\n  name: 'ServicoCadastroPage',\n  setup() {\n    const store = useServicoStore()\n    const router = useRouter()\n    const route = useRoute()\n    const { locale } = useI18n()\n\n    const servico = ref({\n      Id: null,\n      Nome: '',\n      Valor: 0,\n      Descricao: '',\n      Unidade: 'Unidade',\n      Observacao: '',\n      Ativo: true\n    })\n    const valorFormatado = ref('')\n\n    // Computed properties\n    const isEditMode = computed(() => !!route.params.id)\n    const currencyConfig = computed(() => getCurrencyConfig(locale.value))\n\n    const unidadeOptions = [\n      { label: 'Unidade', value: 'Unidade' },\n      { label: 'Hora', value: 'Hora' },\n      { label: 'Metro Quadrado (m²)', value: 'Metro Quadrado' },\n      { label: 'Metro Linear (m)', value: 'Metro Linear' },\n      { label: 'Dia', value: 'Dia' },\n      { label: 'Projeto', value: 'Projeto' },\n      { label: 'Pacote', value: 'Pacote' },\n      { label: 'Cômodo', value: 'Cômodo' },\n      { label: 'Casa', value: 'Casa' },\n      { label: 'Apartamento', value: 'Apartamento' }\n    ]\n\n    const rules = {\n      required: val => !!val || 'Campo obrigatório'\n    }\n\n    // Função para lidar com a entrada do valor\n    function onValorInput(value) {\n      const masked = currencyMask(value, locale.value, currencyConfig.value.currency)\n      valorFormatado.value = masked\n      servico.value.Valor = parseCurrency(masked)\n    }\n\n    onMounted(() => {\n      if (route.params.id) {\n        const s = store.servicos.find(s => s.Id === route.params.id)\n        if (s) {\n          servico.value = { ...s }\n          valorFormatado.value = formatCurrency(s.Valor, locale.value, currencyConfig.value.currency)\n        }\n      }\n    })\n\n    async function salvarServico() {\n      if (servico.value.Id) {\n        await store.updateServico(servico.value)\n      } else {\n        await store.addServico(servico.value)\n      }\n      router.push('/servicos')\n    }\n\n    function cancelar() {\n      router.push('/servicos')\n    }\n\n    return {\n      store,\n      servico,\n      valorFormatado,\n      isEditMode,\n      currencyConfig,\n      unidadeOptions,\n      rules,\n      salvarServico,\n      cancelar,\n      onValorInput\n    }\n  }\n})\n</script>\n\n<style lang=\"sass\">\n// ...estilos específicos se necessário\n</style>\n"],"names":["s","_createBlock","_createElementVNode","_createVNode","_toDisplayString","_createTextVNode"],"mappings":"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"}
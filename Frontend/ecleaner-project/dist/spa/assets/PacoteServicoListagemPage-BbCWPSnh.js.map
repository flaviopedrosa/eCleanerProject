{"version":3,"file":"PacoteServicoListagemPage-BbCWPSnh.js","sources":["../../../src/pages/PacoteServicoListagemPage.vue"],"sourcesContent":["<template>\n  <q-page class=\"q-pa-lg\">\n    <!-- Cabe√ßalho padr√£o -->\n    <div class=\"row items-center q-mb-xl\">\n      <div class=\"col\">\n        <div class=\"row items-center q-mb-sm\">\n          <q-icon name=\"inventory\" size=\"2rem\" class=\"text-secondary q-mr-md\" />\n          <h4 class=\"text-h5 q-ma-none text-secondary\">\n            {{ $t('pages.pacoteServico.title') }}\n          </h4>\n        </div>\n        <div class=\"accent-divider q-mb-md\"></div>\n        <div class=\"row justify-end\">\n          <p class=\"text-subtitle1 text-grey-7 q-ma-none\">\n            {{ $t('pages.pacoteServico.subtitle') }}\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Campo de Busca e Controles -->\n    <div class=\"row q-mb-lg items-center q-gutter-md\">\n      <div class=\"col-12 col-md-6\">\n        <q-input v-model=\"filtro\" :placeholder=\"$t('pages.pacoteServico.searchPlaceholder')\" filled clearable dense>\n          <template v-slot:prepend>\n            <q-icon name=\"search\" />\n          </template>\n        </q-input>\n      </div>\n      <q-space />\n      <div class=\"row items-center q-gutter-md\">\n        <q-toggle v-model=\"mostrarApenasFavoritos\" :label=\"$t('pages.pacoteServico.mostrarFavoritos')\" color=\"red\"\n          left-label />\n        <q-chip v-if=\"mostrarApenasFavoritos\" color=\"red\" text-color=\"white\" icon=\"favorite\" class=\"q-ml-sm\">\n          {{ totalFavoritosFiltrados }} {{ $t('pages.pacoteServico.favoritos') }}\n        </q-chip>\n        <q-btn color=\"primary\" icon=\"add\" :label=\"$t('pages.pacoteServico.newButton')\"\n          @click=\"$router.push('/pacotes-servicos/novo')\" />\n      </div>\n    </div>\n\n    <!-- Listagem responsiva -->\n    <div class=\"gt-sm\">\n      <q-table :rows=\"pacotesFiltrados\" :columns=\"columns\" row-key=\"Id\" :loading=\"loading\"\n        :no-data-label=\"$t('pages.pacoteServico.noData')\">\n        <template v-slot:body-cell-Acoes=\"props\">\n          <q-td :props=\"props\">\n            <q-btn flat round :color=\"props.row.Favorito ? 'red' : 'grey'\"\n              :icon=\"props.row.Favorito ? 'favorite' : 'favorite_border'\" @click=\"toggleFavorito(props.row)\" />\n            <q-btn flat round color=\"primary\" icon=\"edit\" @click=\"editarPacote(props.row)\" />\n            <q-btn flat round color=\"negative\" icon=\"delete\" @click=\"excluirPacote(props.row)\" />\n          </q-td>\n        </template>\n      </q-table>\n    </div>\n\n    <div class=\"lt-md\">\n      <div class=\"row q-col-gutter-md\">\n        <div v-for=\"pacote in pacotesFiltrados\" :key=\"pacote.Id\" class=\"col-12\">\n          <q-card flat bordered>\n            <q-card-section>\n              <div class=\"text-h6\">{{ pacote.Descricao }}</div>\n              <div class=\"text-subtitle2 text-grey-7 q-mt-xs\">\n                {{ $t('pages.pacoteServico.margem') }}: {{ pacote.MargemLucro }}%\n              </div>\n              <div class=\"row q-mt-sm\">\n                <div class=\"col-6\">\n                  <div class=\"text-caption text-grey-6\">{{ $t('pages.pacoteServico.valorCusto') }}</div>\n                  <div class=\"text-subtitle2\">{{ pacote.ValorTotalFormatado }}</div>\n                </div>\n                <div class=\"col-6\">\n                  <div class=\"text-caption text-grey-6\">{{ $t('pages.pacoteServico.valorVenda') }}</div>\n                  <div class=\"text-subtitle2 text-positive\">{{ pacote.ValorVendaFormatado }}</div>\n                </div>\n              </div>\n            </q-card-section>\n            <q-card-actions align=\"right\">\n              <q-btn flat round :color=\"pacote.Favorito ? 'red' : 'grey'\"\n                :icon=\"pacote.Favorito ? 'favorite' : 'favorite_border'\" @click=\"toggleFavorito(pacote)\" />\n              <q-btn flat color=\"primary\" :label=\"$t('pages.pacoteServico.editar')\" @click=\"editarPacote(pacote)\" />\n              <q-btn flat color=\"negative\" :label=\"$t('pages.pacoteServico.excluir')\" @click=\"excluirPacote(pacote)\" />\n            </q-card-actions>\n          </q-card>\n        </div>\n        <div v-if=\"pacotesFiltrados.length === 0\" class=\"col-12\">\n          <q-card flat bordered class=\"text-center q-pa-xl\">\n            <q-icon name=\"inventory\" size=\"4rem\" color=\"grey-5\" />\n            <div class=\"text-h6 q-mt-md text-grey-6\">\n              {{ $t('pages.pacoteServico.noData') }}\n            </div>\n          </q-card>\n        </div>\n      </div>\n    </div>\n  </q-page>\n</template>\n\n<script>\nimport { defineComponent, onMounted, computed, ref } from 'vue'\nimport { usePacoteServicoStore } from 'stores/pacote-servico-store'\nimport { useRouter } from 'vue-router'\nimport { useI18n } from 'vue-i18n'\nimport { formatCurrency, getCurrencyConfig } from 'src/core/domain/utils/currencyUtils'\n\nexport default defineComponent({\n  name: 'PacoteServicoListagemPage',\n  setup() {\n    const store = usePacoteServicoStore()\n    const router = useRouter()\n    const { locale, t } = useI18n()\n\n    const mostrarApenasFavoritos = ref(false)\n    const filtro = ref('')\n    const currencyConfig = computed(() => getCurrencyConfig(locale.value))\n\n    const columns = [\n      { name: 'Descricao', label: 'Descri√ß√£o', field: 'Descricao', align: 'left' },\n      { name: 'MargemLucro', label: 'Margem (%)', field: 'MargemLucro', align: 'center' },\n      { name: 'ValorTotal', label: 'Valor Custo', field: 'ValorTotalFormatado', align: 'right' },\n      { name: 'ValorVenda', label: 'Valor Venda', field: 'ValorVendaFormatado', align: 'right' },\n      { name: 'Acoes', label: 'A√ß√µes', field: 'Acoes', align: 'center', sortable: false }\n    ]\n\n    const pacotesFormatados = computed(() => {\n      let pacotesFiltrados = store.pacotes\n\n      if (mostrarApenasFavoritos.value) {\n        pacotesFiltrados = store.pacotes.filter(pacote => pacote.Favorito)\n      }\n\n      return pacotesFiltrados.map(pacote => ({\n        ...pacote,\n        ValorTotalFormatado: formatCurrency(pacote.ValorTotal, locale.value, currencyConfig.value.currency),\n        ValorVendaFormatado: formatCurrency(pacote.ValorVenda, locale.value, currencyConfig.value.currency)\n      }))\n    })\n\n    // Computed para filtrar pacotes com busca\n    const pacotesFiltrados = computed(() => {\n      let pacotes = pacotesFormatados.value\n\n      if (filtro.value) {\n        const filtroLowerCase = filtro.value.toLowerCase()\n        pacotes = pacotes.filter(pacote =>\n          pacote.Descricao.toLowerCase().includes(filtroLowerCase)\n        )\n      }\n\n      return pacotes\n    })\n\n    const totalFavoritosFiltrados = computed(() => {\n      return store.pacotes.filter(pacote => pacote.Favorito).length\n    })\n\n    const loading = computed(() => store.loading)\n\n    onMounted(async () => {\n      console.log('üîç Debug - Carregando pacotes...')\n\n      // Debug: verificar localStorage diretamente\n      const localStorageData = localStorage.getItem('ecleaner_pacotes_servicos')\n      console.log('LocalStorage data:', localStorageData)\n\n      await store.fetchPacotes()\n      console.log('Store pacotes:', store.pacotes.length, 'pacotes carregados')\n    })\n\n    function editarPacote(pacote) {\n      router.push(`/pacotes-servicos/${pacote.Id}`)\n    }\n\n    function excluirPacote(pacote) {\n      if (confirm(t('pages.pacoteServico.confirmarExclusao', { descricao: pacote.Descricao }))) {\n        store.deletePacote(pacote.Id)\n      }\n    }\n\n    function toggleFavorito(pacote) {\n      store.toggleFavorito(pacote.Id)\n    }\n\n    return {\n      // Estado\n      filtro,\n      mostrarApenasFavoritos,\n\n      // Computed\n      pacotesFiltrados,\n      columns,\n      loading,\n      totalFavoritosFiltrados,\n\n      // M√©todos\n      editarPacote,\n      excluirPacote,\n      toggleFavorito\n    }\n  }\n})\n</script>\n\n<style lang=\"sass\">\n// Estilos espec√≠ficos se necess√°rio\n</style>\n"],"names":["pacotesFiltrados","_createBlock","_createElementVNode","_createVNode","_toDisplayString","_withCtx","_createElementBlock","_Fragment","_renderList","_openBlock"],"mappings":"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"}
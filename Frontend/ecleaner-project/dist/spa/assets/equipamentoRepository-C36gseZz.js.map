{"version":3,"file":"equipamentoRepository-C36gseZz.js","sources":["../../../src/core/infrastructure/repositories/equipamentoRepository.js"],"sourcesContent":["import { Equipamento } from '../../domain/entities/equipamento'\n\nexport class EquipamentoRepository {\n  constructor() {\n    // Inicializa o array de equipamentos no localStorage se não existir\n    if (!localStorage.getItem('equipamentos')) {\n      localStorage.setItem('equipamentos', JSON.stringify([]))\n    }\n  }\n\n  // Limpa todos os dados do repositório\n  async clear() {\n    try {\n      localStorage.setItem('equipamentos', JSON.stringify([]))\n    } catch (error) {\n      console.error('Erro ao limpar equipamentos:', error)\n      throw new Error('Erro ao limpar equipamentos')\n    }\n  }\n\n  // Converte um objeto JSON em uma entidade Equipamento\n  _mapToEntity(data) {\n    if (!data) return null\n\n    const equipamento = new Equipamento(\n      data.Descricao,\n      data.Unidade,\n      parseFloat(data.PrecoUnitario) || 0, // Garante que seja um número válido\n      data.Imagem,\n    )\n    equipamento.Id = data.Id\n    return equipamento\n  }\n\n  // Converte uma entidade Equipamento em objeto JSON\n  _mapToData(equipamento) {\n    return {\n      Id: equipamento.Id,\n      Descricao: equipamento.Descricao,\n      Unidade: equipamento.Unidade,\n      PrecoUnitario: parseFloat(equipamento.PrecoUnitario) || 0, // Garante que seja um número válido\n      Imagem: equipamento.Imagem,\n    }\n  }\n\n  // Busca todos os equipamentos\n  async getAll() {\n    try {\n      const data = JSON.parse(localStorage.getItem('equipamentos') || '[]')\n      return data.map((item) => this._mapToEntity(item))\n    } catch (error) {\n      console.error('Erro ao buscar equipamentos:', error)\n      throw new Error('Erro ao buscar equipamentos')\n    }\n  }\n\n  // Busca um equipamento por ID\n  async getById(id) {\n    try {\n      const data = JSON.parse(localStorage.getItem('equipamentos') || '[]')\n      const equipamentoData = data.find((item) => item.Id === id)\n      return this._mapToEntity(equipamentoData)\n    } catch (error) {\n      console.error('Erro ao buscar equipamento:', error)\n      throw new Error('Erro ao buscar equipamento')\n    }\n  }\n\n  // Salva um equipamento (cria novo ou atualiza existente)\n  async save(equipamento) {\n    try {\n      const data = JSON.parse(localStorage.getItem('equipamentos') || '[]')\n      const existingIndex = data.findIndex((item) => item.Id === equipamento.Id)\n\n      const equipamentoData = this._mapToData(equipamento)\n\n      if (existingIndex >= 0) {\n        // Atualiza equipamento existente\n        data[existingIndex] = equipamentoData\n      } else {\n        // Adiciona novo equipamento\n        data.push(equipamentoData)\n      }\n\n      localStorage.setItem('equipamentos', JSON.stringify(data))\n      return this._mapToEntity(equipamentoData)\n    } catch (error) {\n      console.error('Erro ao salvar equipamento:', error)\n      throw new Error('Erro ao salvar equipamento')\n    }\n  }\n\n  // Cria um novo equipamento\n  async create(equipamento) {\n    try {\n      const data = JSON.parse(localStorage.getItem('equipamentos') || '[]')\n      const equipamentoData = this._mapToData(equipamento)\n      data.push(equipamentoData)\n      localStorage.setItem('equipamentos', JSON.stringify(data))\n      return this._mapToEntity(equipamentoData)\n    } catch (error) {\n      console.error('Erro ao criar equipamento:', error)\n      throw new Error('Erro ao criar equipamento')\n    }\n  }\n\n  // Atualiza um equipamento existente\n  async update(equipamento) {\n    try {\n      const data = JSON.parse(localStorage.getItem('equipamentos') || '[]')\n      const index = data.findIndex((item) => item.Id === equipamento.Id)\n\n      if (index === -1) {\n        throw new Error('Equipamento não encontrado')\n      }\n\n      const equipamentoData = this._mapToData(equipamento)\n      data[index] = equipamentoData\n      localStorage.setItem('equipamentos', JSON.stringify(data))\n      return this._mapToEntity(equipamentoData)\n    } catch (error) {\n      console.error('Erro ao atualizar equipamento:', error)\n      throw new Error('Erro ao atualizar equipamento')\n    }\n  }\n\n  // Remove um equipamento\n  async delete(id) {\n    try {\n      const data = JSON.parse(localStorage.getItem('equipamentos') || '[]')\n      const index = data.findIndex((item) => item.Id === id)\n\n      if (index === -1) {\n        throw new Error('Equipamento não encontrado')\n      }\n\n      data.splice(index, 1)\n      localStorage.setItem('equipamentos', JSON.stringify(data))\n      return true\n    } catch (error) {\n      console.error('Erro ao deletar equipamento:', error)\n      throw new Error('Erro ao deletar equipamento')\n    }\n  }\n\n  // Busca equipamentos por descrição (busca parcial)\n  async searchByDescricao(termo) {\n    try {\n      const data = JSON.parse(localStorage.getItem('equipamentos') || '[]')\n      const termoLower = termo.toLowerCase()\n      const filtered = data.filter((item) => item.Descricao.toLowerCase().includes(termoLower))\n      return filtered.map((item) => this._mapToEntity(item))\n    } catch (error) {\n      console.error('Erro ao buscar equipamentos:', error)\n      throw new Error('Erro ao buscar equipamentos')\n    }\n  }\n}\n"],"names":[],"mappings":"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"}
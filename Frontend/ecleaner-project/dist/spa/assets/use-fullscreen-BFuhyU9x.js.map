{"version":3,"file":"use-fullscreen-BFuhyU9x.js","sources":["../../../node_modules/quasar/src/composables/private.use-fullscreen/use-fullscreen.js"],"sourcesContent":["import { ref, watch, onBeforeMount, onMounted, onBeforeUnmount, getCurrentInstance } from 'vue'\n\nimport History from '../../plugins/private.history/History.js'\nimport { vmHasRouter } from '../../utils/private.vm/vm.js'\n\nlet counter = 0\n\nexport const useFullscreenProps = {\n  fullscreen: Boolean,\n  noRouteFullscreenExit: Boolean\n}\n\nexport const useFullscreenEmits = [ 'update:fullscreen', 'fullscreen' ]\n\nexport default function () {\n  const vm = getCurrentInstance()\n  const { props, emit, proxy } = vm\n\n  let historyEntry, fullscreenFillerNode, container\n  const inFullscreen = ref(false)\n\n  vmHasRouter(vm) === true && watch(() => proxy.$route.fullPath, () => {\n    props.noRouteFullscreenExit !== true && exitFullscreen()\n  })\n\n  watch(() => props.fullscreen, v => {\n    if (inFullscreen.value !== v) {\n      toggleFullscreen()\n    }\n  })\n\n  watch(inFullscreen, v => {\n    emit('update:fullscreen', v)\n    emit('fullscreen', v)\n  })\n\n  function toggleFullscreen () {\n    if (inFullscreen.value === true) {\n      exitFullscreen()\n    }\n    else {\n      setFullscreen()\n    }\n  }\n\n  function setFullscreen () {\n    if (inFullscreen.value === true) return\n\n    inFullscreen.value = true\n    container = proxy.$el.parentNode\n    container.replaceChild(fullscreenFillerNode, proxy.$el)\n    document.body.appendChild(proxy.$el)\n\n    counter++\n    if (counter === 1) {\n      document.body.classList.add('q-body--fullscreen-mixin')\n    }\n\n    historyEntry = {\n      handler: exitFullscreen\n    }\n    History.add(historyEntry)\n  }\n\n  function exitFullscreen () {\n    if (inFullscreen.value !== true) return\n\n    if (historyEntry !== void 0) {\n      History.remove(historyEntry)\n      historyEntry = void 0\n    }\n\n    container.replaceChild(proxy.$el, fullscreenFillerNode)\n    inFullscreen.value = false\n\n    counter = Math.max(0, counter - 1)\n\n    if (counter === 0) {\n      document.body.classList.remove('q-body--fullscreen-mixin')\n\n      if (proxy.$el.scrollIntoView !== void 0) {\n        setTimeout(() => { proxy.$el.scrollIntoView() })\n      }\n    }\n  }\n\n  onBeforeMount(() => {\n    fullscreenFillerNode = document.createElement('span')\n  })\n\n  onMounted(() => {\n    props.fullscreen === true && setFullscreen()\n  })\n\n  onBeforeUnmount(exitFullscreen)\n\n  // expose public methods\n  Object.assign(proxy, {\n    toggleFullscreen,\n    setFullscreen,\n    exitFullscreen\n  })\n\n  return {\n    inFullscreen,\n    toggleFullscreen\n  }\n}\n"],"names":[],"mappings":";AAKA,IAAI,UAAU;AAEF,MAAC,qBAAqB;AAAA,EAChC,YAAY;AAAA,EACZ,uBAAuB;AACzB;AAEY,MAAC,qBAAqB,CAAE,qBAAqB,YAAY;AAEtD,SAAA,gBAAY;AACzB,QAAM,KAAK,mBAAkB;AAC7B,QAAM,EAAE,OAAO,MAAM,UAAU;AAE/B,MAAI,cAAc,sBAAsB;AACxC,QAAM,eAAe,IAAI,KAAK;AAE9B,cAAY,EAAE,MAAM,QAAQ,MAAM,MAAM,MAAM,OAAO,UAAU,MAAM;AACnE,UAAM,0BAA0B,QAAQ,eAAc;AAAA,EACxD,CAAC;AAED,QAAM,MAAM,MAAM,YAAY,OAAK;AACjC,QAAI,aAAa,UAAU,GAAG;AAC5B,uBAAgB;AAAA,IAClB;AAAA,EACF,CAAC;AAED,QAAM,cAAc,OAAK;AACvB,SAAK,qBAAqB,CAAC;AAC3B,SAAK,cAAc,CAAC;AAAA,EACtB,CAAC;AAED,WAAS,mBAAoB;AAC3B,QAAI,aAAa,UAAU,MAAM;AAC/B,qBAAc;AAAA,IAChB,OACK;AACH,oBAAa;AAAA,IACf;AAAA,EACF;AAEA,WAAS,gBAAiB;AACxB,QAAI,aAAa,UAAU,KAAM;AAEjC,iBAAa,QAAQ;AACrB,gBAAY,MAAM,IAAI;AACtB,cAAU,aAAa,sBAAsB,MAAM,GAAG;AACtD,aAAS,KAAK,YAAY,MAAM,GAAG;AAEnC;AACA,QAAI,YAAY,GAAG;AACjB,eAAS,KAAK,UAAU,IAAI,0BAA0B;AAAA,IACxD;AAEA,mBAAe;AAAA,MACb,SAAS;AAAA,IACf;AACI,YAAQ,IAAI,YAAY;AAAA,EAC1B;AAEA,WAAS,iBAAkB;AACzB,QAAI,aAAa,UAAU,KAAM;AAEjC,QAAI,iBAAiB,QAAQ;AAC3B,cAAQ,OAAO,YAAY;AAC3B,qBAAe;AAAA,IACjB;AAEA,cAAU,aAAa,MAAM,KAAK,oBAAoB;AACtD,iBAAa,QAAQ;AAErB,cAAU,KAAK,IAAI,GAAG,UAAU,CAAC;AAEjC,QAAI,YAAY,GAAG;AACjB,eAAS,KAAK,UAAU,OAAO,0BAA0B;AAEzD,UAAI,MAAM,IAAI,mBAAmB,QAAQ;AACvC,mBAAW,MAAM;AAAE,gBAAM,IAAI,eAAc;AAAA,QAAG,CAAC;AAAA,MACjD;AAAA,IACF;AAAA,EACF;AAEA,gBAAc,MAAM;AAClB,2BAAuB,SAAS,cAAc,MAAM;AAAA,EACtD,CAAC;AAED,YAAU,MAAM;AACd,UAAM,eAAe,QAAQ,cAAa;AAAA,EAC5C,CAAC;AAED,kBAAgB,cAAc;AAG9B,SAAO,OAAO,OAAO;AAAA,IACnB;AAAA,IACA;AAAA,IACA;AAAA,EACJ,CAAG;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACJ;AACA;","x_google_ignoreList":[0]}
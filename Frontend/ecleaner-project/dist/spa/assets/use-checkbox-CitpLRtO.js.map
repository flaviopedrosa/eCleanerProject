{"version":3,"file":"use-checkbox-CitpLRtO.js","sources":["../../../node_modules/quasar/src/composables/private.use-refocus-target/use-refocus-target.js","../../../node_modules/quasar/src/utils/private.option-sizes/option-sizes.js","../../../node_modules/quasar/src/components/checkbox/use-checkbox.js"],"sourcesContent":["import { h, computed, ref } from 'vue'\n\nexport default function (props, rootRef) {\n  const refocusRef = ref(null)\n\n  const refocusTargetEl = computed(() => {\n    if (props.disable === true) {\n      return null\n    }\n\n    return h('span', {\n      ref: refocusRef,\n      class: 'no-outline',\n      tabindex: -1\n    })\n  })\n\n  function refocusTarget (e) {\n    const root = rootRef.value\n\n    if (e?.qAvoidFocus === true) return\n\n    if (e?.type.indexOf('key') === 0) {\n      if (\n        document.activeElement !== root\n        && root?.contains(document.activeElement) === true\n      ) {\n        root.focus()\n      }\n    }\n    else if (\n      refocusRef.value !== null\n      && ((e === void 0) || (root?.contains(e.target) === true))\n    ) {\n      refocusRef.value.focus()\n    }\n  }\n\n  return {\n    refocusTargetEl,\n    refocusTarget\n  }\n}\n","export default {\n  xs: 30,\n  sm: 35,\n  md: 40,\n  lg: 50,\n  xl: 60\n}\n","import { h, ref, computed, getCurrentInstance, toRaw } from 'vue'\n\nimport useDark, { useDarkProps } from '../../composables/private.use-dark/use-dark.js'\nimport useSize, { useSizeProps } from '../../composables/private.use-size/use-size.js'\nimport useRefocusTarget from '../../composables/private.use-refocus-target/use-refocus-target.js'\nimport { useFormInject, useFormProps } from '../../composables/use-form/private.use-form.js'\n\nimport optionSizes from '../../utils/private.option-sizes/option-sizes.js'\nimport { stopAndPrevent } from '../../utils/event/event.js'\nimport { hSlot, hMergeSlot } from '../../utils/private.render/render.js'\n\nexport const useCheckboxProps = {\n  ...useDarkProps,\n  ...useSizeProps,\n  ...useFormProps,\n\n  modelValue: {\n    required: true,\n    default: null\n  },\n  val: {},\n\n  trueValue: { default: true },\n  falseValue: { default: false },\n  indeterminateValue: { default: null },\n\n  checkedIcon: String,\n  uncheckedIcon: String,\n  indeterminateIcon: String,\n\n  toggleOrder: {\n    type: String,\n    validator: v => v === 'tf' || v === 'ft'\n  },\n  toggleIndeterminate: Boolean,\n\n  label: String,\n  leftLabel: Boolean,\n\n  color: String,\n  keepColor: Boolean,\n  dense: Boolean,\n\n  disable: Boolean,\n  tabindex: [ String, Number ]\n}\n\nexport const useCheckboxEmits = [ 'update:modelValue' ]\n\nexport default function (type, getInner) {\n  const { props, slots, emit, proxy } = getCurrentInstance()\n  const { $q } = proxy\n\n  const isDark = useDark(props, $q)\n\n  const rootRef = ref(null)\n  const { refocusTargetEl, refocusTarget } = useRefocusTarget(props, rootRef)\n  const sizeStyle = useSize(props, optionSizes)\n\n  const modelIsArray = computed(() =>\n    props.val !== void 0 && Array.isArray(props.modelValue)\n  )\n\n  const index = computed(() => {\n    const val = toRaw(props.val)\n    return modelIsArray.value === true\n      ? props.modelValue.findIndex(opt => toRaw(opt) === val)\n      : -1\n  })\n\n  const isTrue = computed(() => (\n    modelIsArray.value === true\n      ? index.value !== -1\n      : toRaw(props.modelValue) === toRaw(props.trueValue)\n  ))\n\n  const isFalse = computed(() => (\n    modelIsArray.value === true\n      ? index.value === -1\n      : toRaw(props.modelValue) === toRaw(props.falseValue)\n  ))\n\n  const isIndeterminate = computed(() =>\n    isTrue.value === false && isFalse.value === false\n  )\n\n  const tabindex = computed(() => (\n    props.disable === true ? -1 : props.tabindex || 0\n  ))\n\n  const classes = computed(() =>\n    `q-${ type } cursor-pointer no-outline row inline no-wrap items-center`\n    + (props.disable === true ? ' disabled' : '')\n    + (isDark.value === true ? ` q-${ type }--dark` : '')\n    + (props.dense === true ? ` q-${ type }--dense` : '')\n    + (props.leftLabel === true ? ' reverse' : '')\n  )\n\n  const innerClass = computed(() => {\n    const state = isTrue.value === true ? 'truthy' : (isFalse.value === true ? 'falsy' : 'indet')\n    const color = props.color !== void 0 && (\n      props.keepColor === true\n      || (type === 'toggle' ? isTrue.value === true : isFalse.value !== true)\n    )\n      ? ` text-${ props.color }`\n      : ''\n\n    return `q-${ type }__inner relative-position non-selectable q-${ type }__inner--${ state }${ color }`\n  })\n\n  const formAttrs = computed(() => {\n    const prop = { type: 'checkbox' }\n\n    props.name !== void 0 && Object.assign(prop, {\n      // see https://vuejs.org/guide/extras/render-function.html#creating-vnodes (.prop)\n      '.checked': isTrue.value,\n      '^checked': isTrue.value === true ? 'checked' : void 0,\n      name: props.name,\n      value: modelIsArray.value === true\n        ? props.val\n        : props.trueValue\n    })\n\n    return prop\n  })\n\n  const injectFormInput = useFormInject(formAttrs)\n\n  const attributes = computed(() => {\n    const attrs = {\n      tabindex: tabindex.value,\n      role: type === 'toggle' ? 'switch' : 'checkbox',\n      'aria-label': props.label,\n      'aria-checked': isIndeterminate.value === true\n        ? 'mixed'\n        : (isTrue.value === true ? 'true' : 'false')\n    }\n\n    if (props.disable === true) {\n      attrs[ 'aria-disabled' ] = 'true'\n    }\n\n    return attrs\n  })\n\n  function onClick (e) {\n    if (e !== void 0) {\n      stopAndPrevent(e)\n      refocusTarget(e)\n    }\n\n    if (props.disable !== true) {\n      emit('update:modelValue', getNextValue(), e)\n    }\n  }\n\n  function getNextValue () {\n    if (modelIsArray.value === true) {\n      if (isTrue.value === true) {\n        const val = props.modelValue.slice()\n        val.splice(index.value, 1)\n        return val\n      }\n\n      return props.modelValue.concat([ props.val ])\n    }\n\n    if (isTrue.value === true) {\n      if (props.toggleOrder !== 'ft' || props.toggleIndeterminate === false) {\n        return props.falseValue\n      }\n    }\n    else if (isFalse.value === true) {\n      if (props.toggleOrder === 'ft' || props.toggleIndeterminate === false) {\n        return props.trueValue\n      }\n    }\n    else {\n      return props.toggleOrder !== 'ft'\n        ? props.trueValue\n        : props.falseValue\n    }\n\n    return props.indeterminateValue\n  }\n\n  function onKeydown (e) {\n    if (e.keyCode === 13 || e.keyCode === 32) {\n      stopAndPrevent(e)\n    }\n  }\n\n  function onKeyup (e) {\n    if (e.keyCode === 13 || e.keyCode === 32) {\n      onClick(e)\n    }\n  }\n\n  const getInnerContent = getInner(isTrue, isIndeterminate)\n\n  // expose public methods\n  Object.assign(proxy, { toggle: onClick })\n\n  return () => {\n    const inner = getInnerContent()\n\n    props.disable !== true && injectFormInput(\n      inner,\n      'unshift',\n      ` q-${ type }__native absolute q-ma-none q-pa-none`\n    )\n\n    const child = [\n      h('div', {\n        class: innerClass.value,\n        style: sizeStyle.value,\n        'aria-hidden': 'true'\n      }, inner)\n    ]\n\n    if (refocusTargetEl.value !== null) {\n      child.push(refocusTargetEl.value)\n    }\n\n    const label = props.label !== void 0\n      ? hMergeSlot(slots.default, [ props.label ])\n      : hSlot(slots.default)\n\n    label !== void 0 && child.push(\n      h('div', {\n        class: `q-${ type }__label q-anchor--skip`\n      }, label)\n    )\n\n    return h('div', {\n      ref: rootRef,\n      class: classes.value,\n      ...attributes.value,\n      onClick,\n      onKeydown,\n      onKeyup\n    }, child)\n  }\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[0,1,2]}
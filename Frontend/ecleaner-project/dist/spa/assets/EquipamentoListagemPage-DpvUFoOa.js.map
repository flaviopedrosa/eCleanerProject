{"version":3,"file":"EquipamentoListagemPage-DpvUFoOa.js","sources":["../../../src/pages/EquipamentoListagemPage.vue"],"sourcesContent":["<template>\n    <q-page class=\"q-pa-lg\">\n        <!-- Cabeçalho da Página -->\n        <div class=\"row items-center q-mb-xl\">\n            <div class=\"col\">\n                <div class=\"row items-center q-mb-sm\">\n                    <q-icon name=\"construction\" size=\"2rem\" class=\"text-secondary q-mr-md\" />\n                    <h4 class=\"text-h5 q-ma-none text-secondary\">\n                        {{ $t('pages.equipamento.title') }}\n                    </h4>\n                </div>\n                <div class=\"accent-divider q-mb-md\"></div>\n                <div class=\"row justify-end\">\n                    <p class=\"text-subtitle1 text-grey-7 q-ma-none\">\n                        {{ $t('pages.equipamento.subtitle') }}\n                    </p>\n                </div>\n            </div>\n        </div>\n\n        <!-- Campo de Busca e Botão Novo Equipamento -->\n        <div class=\"row q-mb-lg items-center q-gutter-md\">\n            <div class=\"col-12 col-md-6\">\n                <q-input v-model=\"filtro\" :placeholder=\"$t('pages.equipamento.searchPlaceholder')\" filled clearable\n                    dense>\n                    <template v-slot:prepend>\n                        <q-icon name=\"search\" />\n                    </template>\n                </q-input>\n            </div>\n            <q-space />\n            <q-btn color=\"primary\" icon=\"add\" :label=\"$t('pages.equipamento.newButton')\"\n                @click=\"irParaNovoEquipamento\" />\n        </div>\n\n        <!-- Versão Desktop -->\n        <div class=\"gt-sm\">\n            <q-table :rows=\"equipamentosFiltrados\" :columns=\"columns\" row-key=\"Id\" flat bordered :loading=\"loading\"\n                :no-data-label=\"$t('pages.equipamento.noData')\">\n                <template v-slot:body-cell-PrecoUnitario=\"props\">\n                    <q-td :props=\"props\">\n                        {{ formatarMoeda(props.row.PrecoUnitario) }}\n                    </q-td>\n                </template>\n                <template v-slot:body-cell-actions=\"props\">\n                    <q-td :props=\"props\">\n                        <q-btn flat round icon=\"edit\" color=\"primary\" size=\"sm\" @click=\"editarEquipamento(props.row)\"\n                            :title=\"$t('pages.equipamento.editButton')\" />\n                        <q-btn flat round icon=\"delete\" color=\"negative\" size=\"sm\"\n                            @click=\"excluirEquipamento(props.row.Id)\" :title=\"$t('pages.equipamento.deleteButton')\" />\n                    </q-td>\n                </template>\n            </q-table>\n        </div>\n\n        <!-- Versão Mobile -->\n        <div class=\"lt-md\">\n            <div class=\"row q-col-gutter-md\">\n                <div v-for=\"equipamento in equipamentosFiltrados\" :key=\"equipamento.Id\" class=\"col-12\">\n                    <q-card flat bordered>\n                        <q-card-section>\n                            <div class=\"row items-center\">\n                                <div class=\"col\">\n                                    <div class=\"text-h6\">{{ equipamento.Descricao }}</div>\n                                    <div class=\"text-caption text-grey-6\">\n                                        {{ equipamento.Unidade }} • {{ formatarMoeda(equipamento.PrecoUnitario) }}\n                                    </div>\n                                </div>\n                                <div class=\"col-auto\">\n                                    <q-btn flat round icon=\"edit\" color=\"primary\" size=\"sm\"\n                                        @click=\"editarEquipamento(equipamento)\" />\n                                    <q-btn flat round icon=\"delete\" color=\"negative\" size=\"sm\"\n                                        @click=\"excluirEquipamento(equipamento.Id)\" />\n                                </div>\n                            </div>\n                        </q-card-section>\n                    </q-card>\n                </div>\n                <div v-if=\"equipamentosFiltrados.length === 0\" class=\"col-12\">\n                    <q-card flat bordered class=\"text-center q-pa-xl\">\n                        <q-icon name=\"construction\" size=\"4rem\" color=\"grey-5\" />\n                        <div class=\"text-h6 q-mt-md text-grey-6\">\n                            {{ $t('pages.equipamento.noData') }}\n                        </div>\n                    </q-card>\n                </div>\n            </div>\n        </div>\n    </q-page>\n</template>\n\n<script>\nimport { defineComponent, ref, computed, onMounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { useRouter } from 'vue-router'\nimport { useEquipamentoStore } from '@/stores/equipamento-store.js'\n\nexport default defineComponent({\n    name: 'EquipamentoListagemPage',\n\n    setup() {\n        const { t } = useI18n()\n        const router = useRouter()\n        const store = useEquipamentoStore()\n\n        // Estado do filtro\n        const filtro = ref('')\n\n        // Configuração da tabela\n        const columns = computed(() => [\n            {\n                name: 'Descricao',\n                label: t('pages.equipamento.fields.descricao'),\n                field: 'Descricao',\n                align: 'left',\n                sortable: true\n            },\n            {\n                name: 'Unidade',\n                label: t('pages.equipamento.fields.unidade'),\n                field: 'Unidade',\n                align: 'center',\n                sortable: true\n            },\n            {\n                name: 'PrecoUnitario',\n                label: t('pages.equipamento.fields.precoUnitario'),\n                field: 'PrecoUnitario',\n                align: 'right',\n                sortable: true,\n                format: (val) => formatarMoeda(val)\n            },\n            {\n                name: 'actions',\n                label: '',\n                field: 'actions',\n                align: 'right'\n            },\n        ])\n\n        // Computed properties\n        const equipamentosSorted = computed(() => store.EquipamentosOrdenados)\n        const loading = computed(() => store.IsLoading)\n\n        // Computed para filtrar equipamentos\n        const equipamentosFiltrados = computed(() => {\n            if (!filtro.value) {\n                return equipamentosSorted.value\n            }\n\n            const filtroLowerCase = filtro.value.toLowerCase()\n            return equipamentosSorted.value.filter(equipamento =>\n                equipamento.Descricao.toLowerCase().includes(filtroLowerCase) ||\n                equipamento.Unidade.toLowerCase().includes(filtroLowerCase)\n            )\n        })\n\n        // Métodos\n        function formatarMoeda(valor) {\n            // Conversão mais robusta\n            let numeroValido = 0\n\n            if (typeof valor === 'number' && !isNaN(valor)) {\n                numeroValido = valor\n            } else if (typeof valor === 'string') {\n                const parsed = parseFloat(valor)\n                numeroValido = isNaN(parsed) ? 0 : parsed\n            }\n\n            return new Intl.NumberFormat('pt-BR', {\n                style: 'currency',\n                currency: 'BRL'\n            }).format(numeroValido)\n        }\n\n        // Navegação para novo equipamento\n        function irParaNovoEquipamento() {\n            router.push('/equipamentos/novo')\n        }\n\n        // Navegação para editar equipamento\n        function editarEquipamento(equipamento) {\n            router.push(`/equipamentos/${equipamento.Id}/editar`)\n        }\n\n        async function excluirEquipamento(id) {\n            try {\n                await store.deleteEquipamento(id)\n            } catch (error) {\n                console.error('Erro ao excluir equipamento:', error)\n            }\n        }\n\n        // Lifecycle\n        onMounted(async () => {\n            await store.loadEquipamentos()\n        })\n\n        return {\n            // Estado\n            filtro,\n\n            // Computed\n            columns,\n            equipamentosFiltrados,\n            loading,\n\n            // Métodos\n            formatarMoeda,\n            irParaNovoEquipamento,\n            editarEquipamento,\n            excluirEquipamento\n        }\n    }\n})\n</script>\n\n<style lang=\"sass\" scoped>\n.accent-divider\n  height: 2px\n  background: $accent\n  width: 100%\n</style>\n"],"names":["_createBlock","_createElementVNode","_createVNode","_toDisplayString","_withCtx","_createTextVNode","_createElementBlock","_Fragment","_renderList","_openBlock"],"mappings":"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"}
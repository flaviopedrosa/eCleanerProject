{"version":3,"file":"clienteRepository-DQ_hoKdA.js","sources":["../../../src/core/infrastructure/repositories/imovelRepository.js","../../../src/core/infrastructure/repositories/clienteRepository.js"],"sourcesContent":["import { Imovel } from '../../domain/entities/imovel'\nimport { Endereco } from '../../domain/entities/endereco'\nimport { Cliente } from '../../domain/entities/cliente'\n\nexport class ImovelRepository {\n  constructor() {\n    this.storageKey = 'imoveis'\n  }\n\n  // Limpa todos os dados do repositório\n  async clear() {\n    localStorage.removeItem(this.storageKey)\n  }\n\n  // Converte um objeto JSON em uma entidade Imovel\n  _mapToEntity(data) {\n    try {\n      // Recria o endereço\n      const endereco = new Endereco(\n        data.Endereco.Descricao,\n        data.Endereco.Logradouro,\n        data.Endereco.Numero,\n        data.Endereco.Cep,\n        data.Endereco.Bairro,\n        data.Endereco.Cidade,\n        data.Endereco.Estado,\n        data.Endereco.Pais,\n      )\n      endereco.Id = data.Endereco.Id\n\n      // Recria o dono (cliente)\n      const dono = new Cliente(\n        data.Dono.Nome,\n        data.Dono.Sobrenome,\n        data.Dono.Email,\n        data.Dono.Celular,\n        data.Dono.Telefone,\n        data.Dono.PreferenciaContato,\n        data.Dono.Observacoes,\n      )\n      dono.Id = data.Dono.Id\n\n      // Recria os endereços do dono\n      if (data.Dono.Enderecos && Array.isArray(data.Dono.Enderecos)) {\n        dono.Enderecos = data.Dono.Enderecos.map((endData) => {\n          const enderecoDono = new Endereco(\n            endData.Descricao,\n            endData.Logradouro,\n            endData.Numero,\n            endData.Cep,\n            endData.Bairro,\n            endData.Cidade,\n            endData.Estado,\n            endData.Pais,\n          )\n          enderecoDono.Id = endData.Id\n          return enderecoDono\n        })\n      }\n\n      // Recria o imóvel\n      const imovel = new Imovel(\n        data.TotalComodos,\n        data.NumeroQuartos,\n        data.NumeroBanheiros,\n        data.AreaTotal,\n        endereco,\n        dono,\n        data.Observacao,\n        data.Imagens || [], // Inclui as imagens ou array vazio\n      )\n      imovel.Id = data.Id\n\n      return imovel\n    } catch (error) {\n      console.error('Erro ao mapear imóvel:', error)\n      throw new Error('Erro ao mapear dados do imóvel')\n    }\n  }\n\n  // Converte uma entidade Imovel em um objeto JSON para armazenamento\n  _mapToJSON(imovel) {\n    return {\n      Id: imovel.Id,\n      TotalComodos: imovel.TotalComodos,\n      NumeroQuartos: imovel.NumeroQuartos,\n      NumeroBanheiros: imovel.NumeroBanheiros,\n      AreaTotal: imovel.AreaTotal,\n      Observacao: imovel.Observacao,\n      Imagens: imovel.Imagens || [], // Inclui as imagens\n      Endereco: {\n        Id: imovel.Endereco.Id,\n        Descricao: imovel.Endereco.Descricao,\n        Logradouro: imovel.Endereco.Logradouro,\n        Numero: imovel.Endereco.Numero,\n        Cep: imovel.Endereco.Cep,\n        Bairro: imovel.Endereco.Bairro,\n        Cidade: imovel.Endereco.Cidade,\n        Estado: imovel.Endereco.Estado,\n        Pais: imovel.Endereco.Pais,\n      },\n      Dono: {\n        Id: imovel.Dono.Id,\n        Nome: imovel.Dono.Nome,\n        Sobrenome: imovel.Dono.Sobrenome,\n        Email: imovel.Dono.Email,\n        Telefone: imovel.Dono.Telefone,\n        Celular: imovel.Dono.Celular,\n        PreferenciaContato: imovel.Dono.PreferenciaContato,\n        Observacoes: imovel.Dono.Observacoes,\n        Enderecos:\n          imovel.Dono.Enderecos?.map((endereco) => ({\n            Id: endereco.Id,\n            Descricao: endereco.Descricao,\n            Logradouro: endereco.Logradouro,\n            Numero: endereco.Numero,\n            Cep: endereco.Cep,\n            Bairro: endereco.Bairro,\n            Cidade: endereco.Cidade,\n            Estado: endereco.Estado,\n            Pais: endereco.Pais,\n          })) || [],\n      },\n    }\n  }\n\n  // Lista todos os imóveis\n  async getAll() {\n    try {\n      const data = JSON.parse(localStorage.getItem(this.storageKey) || '[]')\n      return data.map((item) => this._mapToEntity(item))\n    } catch (error) {\n      console.error('Erro ao buscar imóveis:', error)\n      return []\n    }\n  }\n\n  // Busca um imóvel por ID\n  async getById(id) {\n    try {\n      const data = JSON.parse(localStorage.getItem(this.storageKey) || '[]')\n      const item = data.find((item) => item.Id === id)\n      return item ? this._mapToEntity(item) : null\n    } catch (error) {\n      console.error('Erro ao buscar imóvel por ID:', error)\n      return null\n    }\n  }\n\n  // Busca imóveis por cliente (dono)\n  async getByClienteId(clienteId) {\n    try {\n      const data = JSON.parse(localStorage.getItem(this.storageKey) || '[]')\n      const imoveisCliente = data.filter((item) => item.Dono.Id === clienteId)\n      return imoveisCliente.map((item) => this._mapToEntity(item))\n    } catch (error) {\n      console.error('Erro ao buscar imóveis por cliente:', error)\n      return []\n    }\n  }\n\n  // Salva um imóvel\n  async save(imovel) {\n    try {\n      const data = JSON.parse(localStorage.getItem(this.storageKey) || '[]')\n      const existingIndex = data.findIndex((item) => item.Id === imovel.Id)\n\n      const imovelData = this._mapToJSON(imovel)\n\n      if (existingIndex >= 0) {\n        // Atualiza imóvel existente\n        data[existingIndex] = imovelData\n      } else {\n        // Adiciona novo imóvel\n        data.push(imovelData)\n      }\n\n      localStorage.setItem(this.storageKey, JSON.stringify(data))\n      return this._mapToEntity(imovelData)\n    } catch (error) {\n      console.error('Erro ao salvar imóvel:', error)\n      throw new Error('Erro ao salvar imóvel')\n    }\n  }\n\n  // Adiciona uma imagem a um imóvel específico\n  async adicionarImagem(imovelId, imagem, descricao = '') {\n    try {\n      const imovel = await this.getById(imovelId)\n      if (!imovel) {\n        throw new Error('Imóvel não encontrado')\n      }\n\n      imovel.adicionarImagem(imagem, descricao)\n      return await this.save(imovel)\n    } catch (error) {\n      console.error('Erro ao adicionar imagem ao imóvel:', error)\n      throw error // Propaga o erro original em vez de criar um novo\n    }\n  }\n\n  // Remove uma imagem de um imóvel específico\n  async removerImagem(imovelId, imagemId) {\n    try {\n      const imovel = await this.getById(imovelId)\n      if (!imovel) {\n        throw new Error('Imóvel não encontrado')\n      }\n\n      imovel.removerImagem(imagemId)\n      return await this.save(imovel)\n    } catch (error) {\n      console.error('Erro ao remover imagem do imóvel:', error)\n      throw error // Propaga o erro original\n    }\n  }\n\n  // Atualiza a descrição de uma imagem\n  async atualizarDescricaoImagem(imovelId, imagemId, novaDescricao) {\n    try {\n      const imovel = await this.getById(imovelId)\n      if (!imovel) {\n        throw new Error('Imóvel não encontrado')\n      }\n\n      imovel.atualizarDescricaoImagem(imagemId, novaDescricao)\n      return await this.save(imovel)\n    } catch (error) {\n      console.error('Erro ao atualizar descrição da imagem:', error)\n      throw error // Propaga o erro original\n    }\n  }\n\n  // Busca imóveis que possuem imagens\n  async getImoveisComImagens() {\n    try {\n      const imoveis = await this.getAll()\n      return imoveis.filter((imovel) => imovel.possuiImagens())\n    } catch (error) {\n      console.error('Erro ao buscar imóveis com imagens:', error)\n      return []\n    }\n  }\n\n  // Busca imóveis por número mínimo de imagens\n  async getImovelsPorNumeroImagens(minImagens = 1) {\n    try {\n      const imoveis = await this.getAll()\n      return imoveis.filter((imovel) => imovel.TotalImagens >= minImagens)\n    } catch (error) {\n      console.error('Erro ao buscar imóveis por número de imagens:', error)\n      return []\n    }\n  }\n\n  // Busca todas as imagens de um imóvel específico\n  async getImagensImovel(imovelId) {\n    try {\n      const imovel = await this.getById(imovelId)\n      if (!imovel) {\n        throw new Error('Imóvel não encontrado')\n      }\n\n      return imovel.obterTodasImagens()\n    } catch (error) {\n      console.error('Erro ao buscar imagens do imóvel:', error)\n      throw error // Propaga o erro original\n    }\n  }\n\n  // Busca uma imagem específica de um imóvel\n  async getImagemPorId(imovelId, imagemId) {\n    try {\n      const imovel = await this.getById(imovelId)\n      if (!imovel) {\n        throw new Error('Imóvel não encontrado')\n      }\n\n      return imovel.obterImagemPorId(imagemId)\n    } catch (error) {\n      console.error('Erro ao buscar imagem por ID:', error)\n      throw error // Propaga o erro original\n    }\n  }\n\n  // Exclui todos os imóveis de um cliente específico\n  async deleteByDono(clienteId) {\n    try {\n      const data = JSON.parse(localStorage.getItem(this.storageKey) || '[]')\n      const imoveisRestantes = data.filter((item) => item.Dono.Id !== clienteId)\n      const imoveisRemovidos = data.length - imoveisRestantes.length\n\n      localStorage.setItem(this.storageKey, JSON.stringify(imoveisRestantes))\n\n      console.log(`${imoveisRemovidos} imóveis removidos do cliente ${clienteId}`)\n      return imoveisRemovidos\n    } catch (error) {\n      console.error('Erro ao deletar imóveis por cliente:', error)\n      throw new Error('Erro ao deletar imóveis do cliente')\n    }\n  }\n\n  // Exclui um imóvel\n  async delete(id) {\n    try {\n      const data = JSON.parse(localStorage.getItem(this.storageKey) || '[]')\n      const index = data.findIndex((item) => item.Id === id)\n\n      if (index === -1) {\n        throw new Error('Imóvel não encontrado')\n      }\n\n      data.splice(index, 1)\n      localStorage.setItem(this.storageKey, JSON.stringify(data))\n      return true\n    } catch (error) {\n      console.error('Erro ao deletar imóvel:', error)\n      throw new Error('Erro ao deletar imóvel')\n    }\n  }\n}\n\n// Exporta uma única instância do repositório\nexport default new ImovelRepository()\n","import { Cliente } from '../../domain/entities/cliente'\nimport { Endereco } from '../../domain/entities/endereco'\nimport imovelRepository from './imovelRepository'\n\nexport class ClienteRepository {\n  constructor() {\n    // Inicializa o array de clientes no localStorage se não existir\n    if (!localStorage.getItem('clientes')) {\n      localStorage.setItem('clientes', JSON.stringify([]))\n    }\n  }\n\n  // Limpa todos os dados do repositório\n  async clear() {\n    try {\n      localStorage.setItem('clientes', JSON.stringify([]))\n    } catch (error) {\n      console.error('Erro ao limpar clientes:', error)\n      throw new Error('Erro ao limpar clientes')\n    }\n  }\n\n  // Converte um objeto JSON em uma entidade Cliente\n  _mapToEntity(data) {\n    if (!data) return null\n\n    const cliente = new Cliente(\n      data.nome,\n      data.sobrenome,\n      data.email,\n      data.celular,\n      data.telefone,\n      data.preferenciaContato,\n      data.observacoes,\n    )\n\n    // Define a foto se existir\n    if (data.foto) {\n      cliente.definirFoto(data.foto)\n    }\n\n    // Adiciona endereço se existir (apenas um)\n    if (data.endereco) {\n      cliente.definirEndereco(\n        new Endereco(\n          data.endereco.descricao || 'Principal', // descricao\n          data.endereco.logradouro, // logradouro\n          data.endereco.numero, // numero\n          data.endereco.cep, // cep\n          data.endereco.bairro, // bairro\n          data.endereco.cidade, // cidade\n          data.endereco.estado, // estado\n          data.endereco.pais || 'Brasil', // pais\n        ),\n      )\n    }\n\n    // Compatibilidade com dados antigos (múltiplos endereços)\n    if (data.enderecos && data.enderecos.length > 0) {\n      const primeiroEndereco = data.enderecos[0]\n      cliente.definirEndereco(\n        new Endereco(\n          primeiroEndereco.descricao || 'Principal',\n          primeiroEndereco.logradouro,\n          primeiroEndereco.numero,\n          primeiroEndereco.cep,\n          primeiroEndereco.bairro,\n          primeiroEndereco.cidade,\n          primeiroEndereco.estado,\n          primeiroEndereco.pais || 'Brasil',\n        ),\n      )\n    }\n\n    // Adiciona informações básicas dos imóveis se existirem\n    if (data.imoveis && Array.isArray(data.imoveis)) {\n      data.imoveis.forEach((imovelData) => {\n        // Criamos um objeto simples com os dados básicos do imóvel\n        // Inclui endereço básico para exibição na interface\n        const imovelBasico = {\n          Id: imovelData.id,\n          TotalComodos: imovelData.totalComodos,\n          NumeroQuartos: imovelData.numeroQuartos,\n          NumeroBanheiros: imovelData.numeroBanheiros,\n          AreaTotal: imovelData.areaTotal,\n          Observacao: imovelData.observacao,\n          Endereco: imovelData.endereco\n            ? {\n                Id: imovelData.endereco.id,\n                Descricao: imovelData.endereco.descricao,\n                Logradouro: imovelData.endereco.logradouro,\n                Numero: imovelData.endereco.numero,\n                Cep: imovelData.endereco.cep,\n                Bairro: imovelData.endereco.bairro,\n                Cidade: imovelData.endereco.cidade,\n                Estado: imovelData.endereco.estado,\n                Pais: imovelData.endereco.pais,\n              }\n            : null,\n        }\n        cliente.Imoveis.push(imovelBasico)\n      })\n    }\n\n    cliente.Id = data.id // Preserva o ID original\n    return cliente\n  }\n\n  // Carregar imóveis completos do ImovelRepository\n  async _loadImoveisCompletos(cliente) {\n    try {\n      const imoveisCompletos = await imovelRepository.getByClienteId(cliente.Id)\n      cliente.Imoveis = imoveisCompletos\n      return cliente\n    } catch (error) {\n      console.error('Erro ao carregar imóveis completos:', error)\n      return cliente\n    }\n  }\n\n  // Converte uma entidade Cliente em um objeto JSON para armazenamento\n  _mapToJSON(cliente) {\n    if (!cliente) return null\n\n    return {\n      id: cliente.Id,\n      nome: cliente.Nome,\n      sobrenome: cliente.Sobrenome,\n      email: cliente.Email,\n      telefone: cliente.Telefone,\n      celular: cliente.Celular,\n      foto: cliente.Foto, // Adicionando o mapeamento da foto\n      preferenciaContato: cliente.PreferenciaContato,\n      endereco: cliente.Endereco\n        ? {\n            descricao: cliente.Endereco.Descricao,\n            logradouro: cliente.Endereco.Logradouro,\n            numero: cliente.Endereco.Numero,\n            cep: cliente.Endereco.Cep,\n            bairro: cliente.Endereco.Bairro,\n            cidade: cliente.Endereco.Cidade,\n            estado: cliente.Endereco.Estado,\n            pais: cliente.Endereco.Pais,\n            complemento: cliente.Endereco.Complemento,\n          }\n        : null,\n      observacoes: cliente.Observacoes,\n      imoveis:\n        cliente.Imoveis?.map((imovel) => ({\n          id: imovel.Id,\n          totalComodos: imovel.TotalComodos,\n          numeroQuartos: imovel.NumeroQuartos,\n          numeroBanheiros: imovel.NumeroBanheiros,\n          areaTotal: imovel.AreaTotal,\n          observacao: imovel.Observacao,\n          endereco: imovel.Endereco\n            ? {\n                id: imovel.Endereco.Id,\n                descricao: imovel.Endereco.Descricao,\n                logradouro: imovel.Endereco.Logradouro,\n                numero: imovel.Endereco.Numero,\n                cep: imovel.Endereco.Cep,\n                bairro: imovel.Endereco.Bairro,\n                cidade: imovel.Endereco.Cidade,\n                estado: imovel.Endereco.Estado,\n                pais: imovel.Endereco.Pais,\n              }\n            : null,\n        })) || [],\n    }\n  }\n\n  // Lista todos os clientes\n  async getAll() {\n    try {\n      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]')\n      const clientesMapeados = clientes.map((data) => this._mapToEntity(data))\n\n      // Carregar imóveis completos para cada cliente\n      const clientesComImoveis = await Promise.all(\n        clientesMapeados.map(async (cliente) => {\n          return await this._loadImoveisCompletos(cliente)\n        }),\n      )\n\n      return clientesComImoveis\n    } catch (error) {\n      console.error('Erro ao buscar clientes:', error)\n      throw new Error('Erro ao buscar clientes')\n    }\n  }\n\n  // Busca um cliente por ID\n  async getById(id) {\n    try {\n      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]')\n      const cliente = clientes.find((c) => c.id === id)\n      const clienteMapeado = this._mapToEntity(cliente)\n\n      if (clienteMapeado) {\n        return await this._loadImoveisCompletos(clienteMapeado)\n      }\n\n      return clienteMapeado\n    } catch (error) {\n      console.error('Erro ao buscar cliente:', error)\n      throw new Error('Erro ao buscar cliente')\n    }\n  }\n\n  // Limpa fotos grandes de clientes antigos para liberar espaço\n  _limparFotosAntigas(clientes) {\n    let dadosLimpos = false\n    clientes.forEach((cliente) => {\n      if (cliente.foto && cliente.foto.length > 50000) {\n        // Se foto > 50KB\n        cliente.foto = null\n        dadosLimpos = true\n      }\n    })\n    return dadosLimpos\n  }\n\n  // Salva um novo cliente\n  async save(cliente) {\n    try {\n      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]')\n      const clienteJSON = this._mapToJSON(cliente)\n\n      // Se não tem ID, é um novo cliente\n      if (!clienteJSON.id) {\n        clienteJSON.id = crypto.randomUUID()\n        clientes.push(clienteJSON)\n      } else {\n        // Se tem ID, atualiza o cliente existente\n        const index = clientes.findIndex((c) => c.id === clienteJSON.id)\n        if (index >= 0) {\n          clientes[index] = clienteJSON\n        } else {\n          clientes.push(clienteJSON)\n        }\n      }\n\n      try {\n        localStorage.setItem('clientes', JSON.stringify(clientes))\n      } catch (quotaError) {\n        if (quotaError.name === 'QuotaExceededError') {\n          console.warn('LocalStorage cheio, tentando limpar dados antigos...')\n\n          // Tenta limpar fotos antigas\n          const dadosLimpos = this._limparFotosAntigas(clientes)\n\n          if (dadosLimpos) {\n            try {\n              localStorage.setItem('clientes', JSON.stringify(clientes))\n              console.log('Dados limpos com sucesso, cliente salvo')\n            } catch {\n              throw new Error(\n                'Armazenamento local cheio. Considere remover alguns clientes com fotos.',\n              )\n            }\n          } else {\n            throw new Error(\n              'Armazenamento local cheio. Considere remover alguns clientes para liberar espaço.',\n            )\n          }\n        } else {\n          throw quotaError\n        }\n      }\n\n      return this._mapToEntity(clienteJSON)\n    } catch (error) {\n      console.error('Erro ao salvar cliente:', error)\n      throw new Error(error.message || 'Erro ao salvar cliente')\n    }\n  }\n\n  // Exclui um cliente\n  async delete(id) {\n    try {\n      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]')\n      const filteredClientes = clientes.filter((c) => c.id !== id)\n      localStorage.setItem('clientes', JSON.stringify(filteredClientes))\n    } catch (error) {\n      console.error('Erro ao excluir cliente:', error)\n      throw new Error('Erro ao excluir cliente')\n    }\n  }\n}\n\n// Exporta uma única instância do repositório\nexport default new ClienteRepository()\n"],"names":["item"],"mappings":"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"}
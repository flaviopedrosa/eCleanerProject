{"version":3,"file":"ServicoListagemPage-DiE22Y_7.js","sources":["../../../src/pages/ServicoListagemPage.vue"],"sourcesContent":["<template>\n  <q-page class=\"q-pa-lg\">\n    <!-- Cabe√ßalho padr√£o -->\n    <div class=\"row items-center q-mb-xl\">\n      <div class=\"col\">\n        <div class=\"row items-center q-mb-sm\">\n          <q-icon name=\"build\" size=\"2rem\" class=\"text-secondary q-mr-md\" />\n          <h4 class=\"text-h5 q-ma-none text-secondary\">\n            {{ $t('pages.servico.title') }}\n          </h4>\n        </div>\n        <div class=\"accent-divider q-mb-md\"></div>\n        <div class=\"row justify-end items-center\">\n          <p class=\"text-subtitle1 text-grey-7 q-ma-none\">\n            {{ $t('pages.servico.subtitle') }}\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Campo de Busca e Bot√£o Novo Servi√ßo -->\n    <div class=\"row q-mb-lg items-center q-gutter-md\">\n      <div class=\"col-12 col-md-6\">\n        <q-input v-model=\"filtro\" :placeholder=\"$t('pages.servico.searchPlaceholder')\" filled clearable dense>\n          <template v-slot:prepend>\n            <q-icon name=\"search\" />\n          </template>\n        </q-input>\n      </div>\n      <q-space />\n      <q-btn color=\"primary\" icon=\"add\" :label=\"$t('pages.servico.newButton')\" to=\"/servicos/novo\" />\n    </div>\n\n    <!-- Listagem responsiva -->\n    <div class=\"gt-sm\">\n      <q-table :rows=\"servicosFiltrados\" :columns=\"columns\" row-key=\"Id\" class=\"servico-table\" wrap-cells\n        :no-data-label=\"$t('pages.servico.noData')\">\n        <template v-slot:body-cell-actions=\"props\">\n          <q-td :props=\"props\" class=\"q-gutter-x-sm\">\n            <q-btn flat round color=\"primary\" icon=\"edit\" @click=\"editarServico(props.row)\">\n              <q-tooltip>Editar</q-tooltip>\n            </q-btn>\n            <q-btn flat round color=\"negative\" icon=\"delete\" @click=\"excluirServico(props.row)\">\n              <q-tooltip>Excluir</q-tooltip>\n            </q-btn>\n          </q-td>\n        </template>\n      </q-table>\n    </div>\n\n    <div class=\"lt-md\">\n      <div class=\"row q-col-gutter-md\">\n        <div v-for=\"servico in servicosFiltrados\" :key=\"servico.Id\" class=\"col-12\">\n          <q-card flat bordered>\n            <q-card-section>\n              <div class=\"text-h6\">{{ servico.Nome }}</div>\n              <div class=\"text-subtitle2\">{{ servico.Descricao }}</div>\n              <div class=\"text-caption\">{{ $t('pages.servico.valor') }}: {{ servico.ValorFormatado }}</div>\n            </q-card-section>\n\n            <q-separator />\n\n            <q-card-actions align=\"right\">\n              <q-btn flat color=\"primary\" icon=\"edit\" label=\"Editar\" @click=\"editarServico(servico)\" />\n              <q-btn flat color=\"negative\" icon=\"delete\" label=\"Excluir\" @click=\"excluirServico(servico)\" />\n            </q-card-actions>\n          </q-card>\n        </div>\n        <div v-if=\"servicosFiltrados.length === 0\" class=\"col-12\">\n          <q-card flat bordered class=\"text-center q-pa-xl\">\n            <q-icon name=\"build\" size=\"4rem\" color=\"grey-5\" />\n            <div class=\"text-h6 q-mt-md text-grey-6\">\n              {{ $t('pages.servico.noData') }}\n            </div>\n          </q-card>\n        </div>\n      </div>\n    </div>\n  </q-page>\n</template>\n\n<script>\nimport { defineComponent, onMounted, computed, ref } from 'vue'\nimport { useServicoStore } from '@/stores/servico-store'\nimport { useRouter } from 'vue-router'\nimport { useI18n } from 'vue-i18n'\nimport { useQuasar } from 'quasar'\nimport { getCurrencyConfig, formatCurrency } from '@/core/domain/utils/currencyUtils'\nimport { seedServicos } from '@/core/infrastructure/repositories/seeds/servicoSeed'\n\nexport default defineComponent({\n  name: 'ServicoListagemPage',\n  setup() {\n    const store = useServicoStore()\n    const router = useRouter()\n    const $q = useQuasar()\n    const { locale } = useI18n()\n\n    // Estado do filtro\n    const filtro = ref('')\n\n    const currencyConfig = computed(() => getCurrencyConfig(locale.value))\n\n    const columns = [\n      {\n        name: 'Nome',\n        label: 'Nome',\n        field: 'Nome',\n        align: 'left',\n        style: 'width: 25%; max-width: 180px;'\n      },\n      {\n        name: 'Descricao',\n        label: 'Descri√ß√£o',\n        field: 'Descricao',\n        align: 'left',\n        style: 'width: 40%; max-width: 250px;',\n        classes: 'text-wrap'\n      },\n      {\n        name: 'Valor',\n        label: 'Valor',\n        field: 'ValorFormatado',\n        align: 'right',\n        style: 'width: 15%; max-width: 100px;'\n      },\n      {\n        name: 'actions',\n        label: 'A√ß√µes',\n        field: 'actions',\n        align: 'center',\n        style: 'width: 20%; max-width: 150px;'\n      }\n    ]\n\n    const servicosFormatados = computed(() => {\n      return store.servicos.map(servico => ({\n        ...servico,\n        ValorFormatado: formatCurrency(servico.Valor, locale.value, currencyConfig.value.currency)\n      }))\n    })\n\n    // Computed para filtrar servi√ßos\n    const servicosFiltrados = computed(() => {\n      if (!filtro.value) {\n        return servicosFormatados.value\n      }\n\n      const filtroLowerCase = filtro.value.toLowerCase()\n      return servicosFormatados.value.filter(servico =>\n        servico.Nome.toLowerCase().includes(filtroLowerCase) ||\n        servico.Descricao.toLowerCase().includes(filtroLowerCase)\n      )\n    })\n\n    const editarServico = (servico) => {\n      router.push(`/servicos/editar/${servico.Id}`)\n    }\n\n    const excluirServico = async (servico) => {\n      $q.dialog({\n        title: 'Confirmar Exclus√£o',\n        message: `Tem certeza que deseja excluir o servi√ßo \"${servico.Nome}\"?`,\n        cancel: true,\n        persistent: true,\n        ok: {\n          label: 'Excluir',\n          color: 'negative'\n        }\n      }).onOk(async () => {\n        try {\n          await store.deleteServico(servico.Id)\n          $q.notify({\n            type: 'positive',\n            message: 'Servi√ßo exclu√≠do com sucesso!',\n            position: 'top-right'\n          })\n        } catch (error) {\n          $q.notify({\n            type: 'negative',\n            message: 'Erro ao excluir servi√ßo: ' + error.message,\n            position: 'top-right'\n          })\n        }\n      })\n    }\n\n    onMounted(async () => {\n      await store.fetchServicos()\n\n      // Se n√£o houver servi√ßos, executa o seed automaticamente\n      if (store.servicos.length === 0) {\n        console.log('üå± Nenhum servi√ßo encontrado, executando seed...')\n        try {\n          await seedServicos()\n          await store.fetchServicos() // Recarrega os servi√ßos ap√≥s o seed\n          console.log('‚úÖ Seed executado com sucesso!')\n        } catch (error) {\n          console.error('‚ùå Erro ao executar seed:', error)\n        }\n      }\n    })\n\n    return {\n      // Estado\n      filtro,\n\n      // Computed\n      servicosFiltrados,\n      columns,\n\n      // M√©todos\n      editarServico,\n      excluirServico\n    }\n  }\n})\n</script>\n\n<style lang=\"sass\">\n.servico-table\n  .q-table__container\n    max-width: 100%\n    overflow-x: hidden\n\n  .q-table\n    table-layout: fixed\n    width: 100%\n\n  td, th\n    word-wrap: break-word\n    overflow-wrap: break-word\n\n  .text-wrap\n    white-space: normal !important\n    word-break: break-word\n    max-width: 250px\n\n  // Coluna Nome\n  td:nth-child(1), th:nth-child(1)\n    width: 25%\n    max-width: 180px\n\n  // Coluna Descri√ß√£o\n  td:nth-child(2), th:nth-child(2)\n    width: 40%\n    max-width: 250px\n\n  // Coluna Valor\n  td:nth-child(3), th:nth-child(3)\n    width: 15%\n    max-width: 100px\n\n  // Coluna A√ß√µes\n  td:nth-child(4), th:nth-child(4)\n    width: 20%\n    max-width: 150px\n    text-align: center\n\n// Bot√£o FAB personalizado\n.fixed-bottom-right\n  position: fixed !important\n  z-index: 9999\n  border-radius: 50% !important\n  right: 10px\n  bottom: 40px\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3)\n  /* Garante que fique acima do rodap√© */\n  @media (max-width: 600px)\n    right: 16px\n    bottom: 24px\n\n  .q-btn__content\n    display: flex\n    align-items: center\n    justify-content: center\n\n  .q-icon\n    margin: 0 !important\n</style>\n"],"names":["_createBlock","_createElementVNode","_createVNode","_toDisplayString","_withCtx","_createElementBlock","_Fragment","_renderList","_openBlock"],"mappings":"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"}
{"version":3,"file":"ClosePopup-BrDwQcvw.js","sources":["../../../node_modules/quasar/src/directives/close-popup/ClosePopup.js"],"sourcesContent":["import { createDirective } from '../../utils/private.create/create.js'\nimport { closePortals, getPortalProxy } from '../../utils/private.portal/portal.js'\nimport { isKeyCode } from '../../utils/private.keyboard/key-composition.js'\nimport getSSRProps from '../../utils/private.noop-ssr-directive-transform/noop-ssr-directive-transform.js'\n\n/*\n * depth\n *   < 0  --> close all chain\n *   0    --> disabled\n *   > 0  --> close chain up to N parent\n */\n\nfunction getDepth (value) {\n  if (value === false) {\n    return 0\n  }\n  if (value === true || value === void 0) {\n    return 1\n  }\n\n  const depth = parseInt(value, 10)\n  return isNaN(depth) ? 0 : depth\n}\n\nexport default createDirective(__QUASAR_SSR_SERVER__\n  ? { name: 'close-popup', getSSRProps }\n  : {\n      name: 'close-popup',\n\n      beforeMount (el, { value }) {\n        const ctx = {\n          depth: getDepth(value),\n\n          handler (evt) {\n            // allow @click to be emitted\n            ctx.depth !== 0 && setTimeout(() => {\n              const proxy = getPortalProxy(el)\n              if (proxy !== void 0) {\n                closePortals(proxy, evt, ctx.depth)\n              }\n            })\n          },\n\n          handlerKey (evt) {\n            isKeyCode(evt, 13) === true && ctx.handler(evt)\n          }\n        }\n\n        el.__qclosepopup = ctx\n\n        el.addEventListener('click', ctx.handler)\n        el.addEventListener('keyup', ctx.handlerKey)\n      },\n\n      updated (el, { value, oldValue }) {\n        if (value !== oldValue) {\n          el.__qclosepopup.depth = getDepth(value)\n        }\n      },\n\n      beforeUnmount (el) {\n        const ctx = el.__qclosepopup\n        el.removeEventListener('click', ctx.handler)\n        el.removeEventListener('keyup', ctx.handlerKey)\n        delete el.__qclosepopup\n      }\n    }\n)\n"],"names":[],"mappings":";AAYA,SAAS,SAAU,OAAO;AACxB,MAAI,UAAU,OAAO;AACnB,WAAO;AAAA,EACT;AACA,MAAI,UAAU,QAAQ,UAAU,QAAQ;AACtC,WAAO;AAAA,EACT;AAEA,QAAM,QAAQ,SAAS,OAAO,EAAE;AAChC,SAAO,MAAM,KAAK,IAAI,IAAI;AAC5B;AAEA,MAAA,aAAe;AAAA,EAEX;AAAA,IACE,MAAM;AAAA,IAEN,YAAa,IAAI,EAAE,SAAS;AAC1B,YAAM,MAAM;AAAA,QACV,OAAO,SAAS,KAAK;AAAA,QAErB,QAAS,KAAK;AAEZ,cAAI,UAAU,KAAK,WAAW,MAAM;AAClC,kBAAM,QAAQ,eAAe,EAAE;AAC/B,gBAAI,UAAU,QAAQ;AACpB,2BAAa,OAAO,KAAK,IAAI,KAAK;AAAA,YACpC;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QAEA,WAAY,KAAK;AACf,oBAAU,KAAK,EAAE,MAAM,QAAQ,IAAI,QAAQ,GAAG;AAAA,QAChD;AAAA,MAAA;AAGF,SAAG,gBAAgB;AAEnB,SAAG,iBAAiB,SAAS,IAAI,OAAO;AACxC,SAAG,iBAAiB,SAAS,IAAI,UAAU;AAAA,IAC7C;AAAA,IAEA,QAAS,IAAI,EAAE,OAAO,YAAY;AAChC,UAAI,UAAU,UAAU;AACtB,WAAG,cAAc,QAAQ,SAAS,KAAK;AAAA,MACzC;AAAA,IACF;AAAA,IAEA,cAAe,IAAI;AACjB,YAAM,MAAM,GAAG;AACf,SAAG,oBAAoB,SAAS,IAAI,OAAO;AAC3C,SAAG,oBAAoB,SAAS,IAAI,UAAU;AAC9C,aAAO,GAAG;AAAA,IACZ;AAAA,EAAA;AAEN;","x_google_ignoreList":[0]}
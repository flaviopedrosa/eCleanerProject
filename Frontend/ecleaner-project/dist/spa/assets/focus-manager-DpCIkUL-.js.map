{"version":3,"file":"focus-manager-DpCIkUL-.js","sources":["../../../node_modules/quasar/src/utils/uid/uid.js","../../../node_modules/quasar/src/composables/use-id/use-id.js","../../../node_modules/quasar/src/utils/private.focus/focus-manager.js"],"sourcesContent":["/**\n * Based on the work of https://github.com/jchook/uuid-random\n */\n\nlet\n  buf,\n  bufIdx = 0\nconst hexBytes = new Array(256)\n\n// Pre-calculate toString(16) for speed\nfor (let i = 0; i < 256; i++) {\n  hexBytes[ i ] = (i + 0x100).toString(16).substring(1)\n}\n\n// Use best available PRNG\nconst randomBytes = (() => {\n  // Node & Browser support\n  const lib = typeof crypto !== 'undefined'\n    ? crypto\n    : (\n        typeof window !== 'undefined'\n          ? window.crypto || window.msCrypto\n          : void 0\n      )\n\n  if (lib !== void 0) {\n    if (lib.randomBytes !== void 0) {\n      return lib.randomBytes\n    }\n    if (lib.getRandomValues !== void 0) {\n      return n => {\n        const bytes = new Uint8Array(n)\n        lib.getRandomValues(bytes)\n        return bytes\n      }\n    }\n  }\n\n  return n => {\n    const r = []\n    for (let i = n; i > 0; i--) {\n      r.push(Math.floor(Math.random() * 256))\n    }\n    return r\n  }\n})()\n\n// Buffer random numbers for speed\n// Reduce memory usage by decreasing this number (min 16)\n// or improve speed by increasing this number (try 16384)\nconst BUFFER_SIZE = 4096\n\nexport default function () {\n  // Buffer some random bytes for speed\n  if (buf === void 0 || (bufIdx + 16 > BUFFER_SIZE)) {\n    bufIdx = 0\n    buf = randomBytes(BUFFER_SIZE)\n  }\n\n  const b = Array.prototype.slice.call(buf, bufIdx, (bufIdx += 16))\n  b[ 6 ] = (b[ 6 ] & 0x0f) | 0x40\n  b[ 8 ] = (b[ 8 ] & 0x3f) | 0x80\n\n  return hexBytes[ b[ 0 ] ] + hexBytes[ b[ 1 ] ]\n    + hexBytes[ b[ 2 ] ] + hexBytes[ b[ 3 ] ] + '-'\n    + hexBytes[ b[ 4 ] ] + hexBytes[ b[ 5 ] ] + '-'\n    + hexBytes[ b[ 6 ] ] + hexBytes[ b[ 7 ] ] + '-'\n    + hexBytes[ b[ 8 ] ] + hexBytes[ b[ 9 ] ] + '-'\n    + hexBytes[ b[ 10 ] ] + hexBytes[ b[ 11 ] ]\n    + hexBytes[ b[ 12 ] ] + hexBytes[ b[ 13 ] ]\n    + hexBytes[ b[ 14 ] ] + hexBytes[ b[ 15 ] ]\n}\n","import { ref, computed, watch, onMounted } from 'vue'\n\nimport uid from '../../utils/uid/uid.js'\n\nimport { isRuntimeSsrPreHydration } from '../../plugins/platform/Platform.js'\n\nfunction parseValue (val) {\n  return val === void 0 || val === null\n    ? null\n    : val\n}\n\nfunction getId (val, required) {\n  return val === void 0 || val === null\n    ? (required === true ? `f_${ uid() }` : null)\n    : val\n}\n\n/**\n * Returns an \"id\" which is a ref() that can be used as\n * a unique identifier to apply to a DOM node attribute.\n *\n * On SSR, it takes care of generating the id on the client side (only) to\n * avoid hydration errors.\n */\nexport default function ({ getValue, required = true } = {}) {\n  if (isRuntimeSsrPreHydration.value === true) {\n    const id = getValue !== void 0\n      ? ref(parseValue(getValue()))\n      : ref(null)\n\n    if (required === true && id.value === null) {\n      onMounted(() => {\n        id.value = `f_${ uid() }` // getId(null, true)\n      })\n    }\n\n    if (getValue !== void 0) {\n      watch(getValue, newId => {\n        id.value = getId(newId, required)\n      })\n    }\n\n    return id\n  }\n\n  return getValue !== void 0\n    ? computed(() => getId(getValue(), required))\n    : ref(`f_${ uid() }`) // getId(null, true)\n}\n","let queue = []\nlet waitFlags = []\n\nfunction clearFlag (flag) {\n  waitFlags = waitFlags.filter(entry => entry !== flag)\n}\n\nexport function addFocusWaitFlag (flag) {\n  clearFlag(flag)\n  waitFlags.push(flag)\n}\n\nexport function removeFocusWaitFlag (flag) {\n  clearFlag(flag)\n\n  if (waitFlags.length === 0 && queue.length !== 0) {\n    // only call last focus handler (can't focus multiple things at once)\n    queue[ queue.length - 1 ]()\n    queue = []\n  }\n}\n\nexport function addFocusFn (fn) {\n  if (waitFlags.length === 0) {\n    fn()\n  }\n  else {\n    queue.push(fn)\n  }\n}\n\nexport function removeFocusFn (fn) {\n  queue = queue.filter(entry => entry !== fn)\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[0,1,2]}
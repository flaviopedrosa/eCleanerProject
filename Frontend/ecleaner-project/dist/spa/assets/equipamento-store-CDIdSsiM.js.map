{"version":3,"file":"equipamento-store-CDIdSsiM.js","sources":["../../../src/stores/equipamento-store.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { Equipamento } from '@/core/domain/entities/equipamento'\nimport { EquipamentoRepository } from '@/core/infrastructure/repositories/equipamentoRepository'\n\nexport const useEquipamentoStore = defineStore('equipamento', {\n  state: () => ({\n    Equipamentos: [],\n    Loading: false,\n    Error: null,\n  }),\n\n  actions: {\n    // Inicializa o repository\n    _getRepository() {\n      return new EquipamentoRepository()\n    },\n\n    // Carrega todos os equipamentos\n    async loadEquipamentos() {\n      this.Loading = true\n      this.Error = null\n      try {\n        const repository = this._getRepository()\n        this.Equipamentos = await repository.getAll()\n      } catch (error) {\n        this.Error = error.message\n        throw error\n      } finally {\n        this.Loading = false\n      }\n    },\n\n    // Adiciona um novo equipamento\n    async addEquipamento(equipamentoData) {\n      this.Loading = true\n      this.Error = null\n      try {\n        const equipamento = new Equipamento(\n          equipamentoData.Descricao,\n          equipamentoData.Unidade,\n          parseFloat(equipamentoData.PrecoUnitario) || 0, // Garante que seja um número válido\n          equipamentoData.Imagem,\n        )\n\n        const repository = this._getRepository()\n        const novoEquipamento = await repository.create(equipamento)\n        this.Equipamentos.push(novoEquipamento)\n        return novoEquipamento\n      } catch (error) {\n        this.Error = error.message\n        throw error\n      } finally {\n        this.Loading = false\n      }\n    },\n\n    // Atualiza um equipamento existente\n    async updateEquipamento(equipamentoData) {\n      this.Loading = true\n      this.Error = null\n      try {\n        // Garante que o preço seja um número válido\n        const dadosCorrigidos = {\n          ...equipamentoData,\n          PrecoUnitario: parseFloat(equipamentoData.PrecoUnitario) || 0,\n        }\n\n        const repository = this._getRepository()\n        const equipamentoAtualizado = await repository.update(dadosCorrigidos)\n\n        const index = this.Equipamentos.findIndex((e) => e.Id === equipamentoData.Id)\n        if (index !== -1) {\n          this.Equipamentos[index] = equipamentoAtualizado\n        }\n        return equipamentoAtualizado\n      } catch (error) {\n        this.Error = error.message\n        throw error\n      } finally {\n        this.Loading = false\n      }\n    },\n\n    // Remove um equipamento\n    async deleteEquipamento(id) {\n      this.Loading = true\n      this.Error = null\n      try {\n        const repository = this._getRepository()\n        await repository.delete(id)\n        this.Equipamentos = this.Equipamentos.filter((e) => e.Id !== id)\n      } catch (error) {\n        this.Error = error.message\n        throw error\n      } finally {\n        this.Loading = false\n      }\n    },\n\n    // Busca um equipamento por ID\n    async getEquipamentoById(id) {\n      try {\n        const repository = this._getRepository()\n        return await repository.getById(id)\n      } catch (error) {\n        this.Error = error.message\n        throw error\n      }\n    },\n\n    // Busca equipamentos por descrição\n    async searchEquipamentos(termo) {\n      this.Loading = true\n      this.Error = null\n      try {\n        const repository = this._getRepository()\n        return await repository.searchByDescricao(termo)\n      } catch (error) {\n        this.Error = error.message\n        throw error\n      } finally {\n        this.Loading = false\n      }\n    },\n\n    // Limpa o estado de erro\n    clearError() {\n      this.Error = null\n    },\n  },\n\n  getters: {\n    // Total de equipamentos\n    TotalEquipamentos: (state) => state.Equipamentos.length,\n\n    // Equipamentos ordenados por descrição\n    EquipamentosOrdenados: (state) => {\n      return [...state.Equipamentos].sort((a, b) =>\n        a.Descricao.localeCompare(b.Descricao, 'pt-BR', { sensitivity: 'base' }),\n      )\n    },\n\n    // Verifica se há equipamentos\n    HasEquipamentos: (state) => state.Equipamentos.length > 0,\n\n    // Estado de loading\n    IsLoading: (state) => state.Loading,\n\n    // Estado de erro\n    HasError: (state) => !!state.Error,\n  },\n})\n"],"names":[],"mappings":"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"}
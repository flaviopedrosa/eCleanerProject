{"version":3,"mappings":"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","names":["seedMateriais","_createBlock","_createElementVNode","_createVNode","_toDisplayString","_withCtx","_createTextVNode","_createElementBlock","_Fragment","_renderList","_openBlock"],"ignoreList":[],"sources":["../../../src/pages/MaterialListagemPage.vue"],"sourcesContent":["<template>\n  <q-page class=\"q-pa-lg\">\n    <!-- Cabeçalho da Página -->\n    <div class=\"row items-center q-mb-xl\">\n      <div class=\"col\">\n        <div class=\"row items-center q-mb-sm\">\n          <q-icon name=\"category\" size=\"2rem\" class=\"text-secondary q-mr-md\" />\n          <h4 class=\"text-h5 q-ma-none text-secondary\">\n            {{ $t('pages.material.title') }}\n          </h4>\n        </div>\n        <div class=\"accent-divider q-mb-md\"></div>\n        <div class=\"row justify-end\">\n          <p class=\"text-subtitle1 text-grey-7 q-ma-none\">\n            {{ $t('pages.material.subtitle') }}\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Campo de Busca e Botão Novo Material -->\n    <div class=\"row q-mb-lg items-center q-gutter-md\">\n      <div class=\"col-12 col-md-6\">\n        <q-input v-model=\"filtro\" :placeholder=\"$t('pages.material.searchPlaceholder')\" filled clearable dense>\n          <template v-slot:prepend>\n            <q-icon name=\"search\" />\n          </template>\n        </q-input>\n      </div>\n      <q-space />\n      <q-btn color=\"primary\" icon=\"add\" :label=\"$t('pages.material.newButton')\" @click=\"irParaNovoMaterial\" />\n    </div>\n\n    <!-- Versão Desktop -->\n    <div class=\"gt-sm\">\n      <q-table :rows=\"materiaisFiltrados\" :columns=\"columns\" row-key=\"Id\" flat bordered :loading=\"loading\"\n        :no-data-label=\"$t('pages.material.noData')\">\n        <template v-slot:body-cell-PrecoUnitario=\"props\">\n          <q-td :props=\"props\">\n            {{ formatarMoeda(props.row.PrecoUnitario) }}\n          </q-td>\n        </template>\n        <template v-slot:body-cell-actions=\"props\">\n          <q-td :props=\"props\">\n            <q-btn flat round icon=\"edit\" color=\"primary\" size=\"sm\" @click=\"editarMaterial(props.row)\"\n              :title=\"$t('pages.material.editButton')\" />\n            <q-btn flat round icon=\"delete\" color=\"negative\" size=\"sm\" @click=\"excluirMaterial(props.row.Id)\"\n              :title=\"$t('pages.material.deleteButton')\" />\n          </q-td>\n        </template>\n      </q-table>\n    </div>\n\n    <!-- Versão Mobile -->\n    <div class=\"lt-md\">\n      <div class=\"row q-col-gutter-md\">\n        <div v-for=\"material in materiaisFiltrados\" :key=\"material.Id\" class=\"col-12\">\n          <q-card flat bordered>\n            <q-card-section>\n              <div class=\"row items-center\">\n                <div class=\"col\">\n                  <div class=\"text-h6\">{{ material.Descricao }}</div>\n                  <div class=\"text-caption text-grey-6\">\n                    {{ material.Unidade }} • {{ formatarMoeda(material.PrecoUnitario) }}\n                  </div>\n                </div>\n                <div class=\"col-auto\">\n                  <q-btn flat round icon=\"edit\" color=\"primary\" size=\"sm\" @click=\"editarMaterial(material)\" />\n                  <q-btn flat round icon=\"delete\" color=\"negative\" size=\"sm\" @click=\"excluirMaterial(material.Id)\" />\n                </div>\n              </div>\n            </q-card-section>\n          </q-card>\n        </div>\n        <div v-if=\"materiaisFiltrados.length === 0\" class=\"col-12\">\n          <q-card flat bordered class=\"text-center q-pa-xl\">\n            <q-icon name=\"category\" size=\"4rem\" color=\"grey-5\" />\n            <div class=\"text-h6 q-mt-md text-grey-6\">\n              {{ $t('pages.material.noData') }}\n            </div>\n          </q-card>\n        </div>\n      </div>\n    </div>\n\n    <!-- ...modal removido, agora navegação por rota... -->\n  </q-page>\n</template>\n\n<script>\nimport { defineComponent, ref, computed, onMounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { useRouter } from 'vue-router'\nimport { useMaterialStore } from '@/stores/material-store.js'\n\n\nexport default defineComponent({\n  name: 'MaterialListagemPage',\n\n\n\n  setup() {\n    const { t } = useI18n()\n    const router = useRouter()\n    const store = useMaterialStore()\n\n    // Estado do filtro\n    const filtro = ref('')\n\n\n\n    // Configuração da tabela\n    const columns = computed(() => [\n      {\n        name: 'Descricao',\n        label: t('pages.material.fields.descricao'),\n        field: 'Descricao',\n        align: 'left',\n        sortable: true\n      },\n      {\n        name: 'Unidade',\n        label: t('pages.material.fields.unidade'),\n        field: 'Unidade',\n        align: 'center',\n        sortable: true\n      },\n      {\n        name: 'PrecoUnitario',\n        label: t('pages.material.fields.precoUnitario'),\n        field: 'PrecoUnitario',\n        align: 'right',\n        sortable: true,\n        format: (val) => formatarMoeda(val)\n      },\n      {\n        name: 'actions',\n        label: '',\n        field: 'actions',\n        align: 'right'\n      },\n    ])\n\n    // Computed properties\n    const materiaisSorted = computed(() => store.MateriaisOrdenados)\n    const loading = computed(() => store.IsLoading)\n\n    // Computed para filtrar materiais\n    const materiaisFiltrados = computed(() => {\n      if (!filtro.value) {\n        return materiaisSorted.value\n      }\n\n      const filtroLowerCase = filtro.value.toLowerCase()\n      return materiaisSorted.value.filter(material =>\n        material.Descricao.toLowerCase().includes(filtroLowerCase) ||\n        material.Unidade.toLowerCase().includes(filtroLowerCase)\n      )\n    })\n\n    // Métodos\n    function formatarMoeda(valor) {\n      // Debug: verificar o valor recebido\n      console.log('formatarMoeda recebeu:', valor, typeof valor)\n\n      // Conversão mais robusta\n      let numeroValido = 0\n\n      if (typeof valor === 'number' && !isNaN(valor)) {\n        numeroValido = valor\n      } else if (typeof valor === 'string') {\n        const parsed = parseFloat(valor)\n        numeroValido = isNaN(parsed) ? 0 : parsed\n      }\n\n      return new Intl.NumberFormat('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n      }).format(numeroValido)\n    }\n\n\n    // Navegação para novo material\n    function irParaNovoMaterial() {\n      router.push('/materiais/novo')\n    }\n\n    // Navegação para editar material\n    function editarMaterial(material) {\n      router.push(`/materiais/${material.Id}/editar`)\n    }\n\n    async function excluirMaterial(id) {\n      try {\n        await store.deleteMaterial(id)\n      } catch (error) {\n        console.error('Erro ao excluir material:', error)\n      }\n    }\n\n    async function salvarMaterial(material) {\n      try {\n        if (material.Id) {\n          await store.updateMaterial(material)\n        } else {\n          await store.addMaterial(material)\n        }\n      } catch (error) {\n        console.error('Erro ao salvar material:', error)\n      }\n    }\n\n    // Carrega os materiais ao montar o componente\n    onMounted(async () => {\n      try {\n        await store.loadMateriais()\n\n        // Debug: verificar dados carregados\n        console.log('Materiais carregados:', store.Materiais)\n        console.log('Materiais ordenados:', store.MateriaisOrdenados)\n\n        // Se não houver materiais, executar o seed\n        if (store.Materiais.length === 0) {\n          console.log('Nenhum material encontrado, executando seed...')\n          // Importar e executar o seed\n          const { seedMateriais } = await import('@/core/infrastructure/repositories/seeds/materialSeed')\n          await seedMateriais()\n          await store.loadMateriais() // Recarregar após o seed\n          console.log('Seed executado, materiais após seed:', store.Materiais)\n        }\n      } catch (error) {\n        console.error('Erro ao carregar materiais:', error)\n      }\n    })\n\n    return {\n      // Estado\n      filtro,\n\n      // Computed\n      columns,\n      materiaisSorted,\n      materiaisFiltrados,\n      loading,\n\n      // Métodos\n      formatarMoeda,\n      irParaNovoMaterial,\n      editarMaterial,\n      excluirMaterial,\n      salvarMaterial\n    }\n  }\n})\n</script>\n"],"file":"assets/MaterialListagemPage-Cpco1QNK.js"}